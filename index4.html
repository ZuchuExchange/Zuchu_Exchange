<!DOCTYPE html>
<html lang="sw">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aiba Na Mkopo</title> 
<style>
  body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    height: 100vh;
    background-image: url('zuchu1.jpg');
    background-size: cover;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .container {
    width: 90%;
    max-width: 600px;
    padding: 20px;
    box-sizing: border-box;
    background-color: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    color: white;
    overflow-y: auto;
    max-height: 90vh;
  }
  #payText p, #payText span, #payText pre {
    font-family: Arial, sans-serif;
    font-size: 14px;
    font-weight: bold;
    line-height: 1.4;
    white-space: pre-wrap;
  }
  #backButton {
    margin-top: 12px;
    padding: 10px 20px;
    font-size: 12px;
    cursor: pointer;
    border: none;
    background-color: #2196F3;
    color: white;
    border-radius: 5px;
  }
  #backButton:hover {
    background-color: #ADD8E6;
  }
  /* Style for copy button */
  #copyButton {
    margin-left: 10px;
    background-color: #555;
    border: none;
    padding: 6px 12px;
    border-radius: 50px;
    color: white;
    cursor: pointer;
  }
  #copyButton:hover {
    background-color: #777;
  }
  /* Style for the alert message */
  #copyAlert {
    position: absolute;
    background-color: #ccc;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    color: #000;
    opacity: 0;
    transition: opacity 0.3s;
    z-index: 9999;
  }
</style>
</head>
<body>
<div class="container">
  <h2 style="color: white;">Akiba Na Mkopo</h2>
  <div id="payText"></div>
  <button id="backButton">Nyuma</button>
</div>
<div id="copyAlert"></div>

<script>
// Function to get URL parameters
function getQueryParam(param) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(param);
}

// Retrieve values from URL parameters
const jinaParam = getQueryParam('jina') || 'Hakuna Jina';
const loanParam = getQueryParam('loan') || 'Hakuna jina la loan';
const feesParam = getQueryParam('fees') || 'Hakuna fee';
const phone_number = getQueryParam('phone_number') || 'Hakuna Namba';

// Use these variables
const name = jinaParam;
const loan = loanParam;
const fees = feesParam;

// Build instruction texts with the retrieved values
const instructionText1 = `Hongera ${name} Umethibitishwa Kupokea Tsh ${loan}.

Unatakiwa Kulipia Tsh ${fees}, Akiba Ili Upokee Mkopo Wako.

Fuata Maelezo Haya Ili Ufanye Malipo Yako. Malipo Yanafanywa kwenye Nambari Rasmi Ya katibu (Amos Cosmas Paulo).

Baada Ya Kufanya Malipo Yako Utapokea Mkopo Wako Wa Tsh ${loan}. Baada Ya Dakika Tano.

Utapokea Mkopo Wako Kwenye Laini Yako Au Akaunti Kisha Utapigiwa Simu Ili uweze Kuthibitisha.

Nambari Ya Malipo Hii Hapa. Thibitisha Nambari Usije Ukakosea.`;

const instructionText2 = '        Nambari: 0767905046';

const instructionText3 = `        Jina: Amos Cosmas Paulo
        Mtandao: Vodacom
        Kiasi: ${fees}`;

// Populate the payText div
const payTextDiv = document.getElementById('payText');
payTextDiv.innerHTML = '';

// Add info for loan and fees
const loanInfo = document.createElement('p');
//loanInfo.textContent = `Jina la Loan: ${loan}`;
payTextDiv.appendChild(loanInfo);

const feesInfo = document.createElement('p');
//feesInfo.textContent = `Ada: ${fees}`;
payTextDiv.appendChild(feesInfo);

// Add instructionText1
const p1 = document.createElement('p');
p1.textContent = instructionText1;
payTextDiv.appendChild(p1);

// Add instructionText2 with copy button
const div2 = document.createElement('div');
div2.style.display = 'flex';
div2.style.alignItems = 'center';

const span2 = document.createElement('span');
span2.textContent = instructionText2;

const copyBtn = document.createElement('button');
copyBtn.id = 'copyButton';
copyBtn.textContent = 'Copy';

div2.appendChild(span2);
div2.appendChild(copyBtn);
payTextDiv.appendChild(div2);

// Add instructionText3
const pre3 = document.createElement('pre');
pre3.textContent = instructionText3;
payTextDiv.appendChild(pre3);

// Copy alert element
const copyAlert = document.getElementById('copyAlert');

document.getElementById('copyButton').addEventListener('click', () => {
  // Copy the phone number directly
  navigator.clipboard.writeText('0767905046').then(() => {
    // Show alert
    const rect = document.getElementById('copyButton').getBoundingClientRect();
    copyAlert.textContent = 'Copied!';
    copyAlert.style.top = (window.scrollY + rect.top - 30) + 'px';
    copyAlert.style.left = (window.scrollX + rect.left + rect.width/2 - copyAlert.offsetWidth/2) + 'px';
    copyAlert.style.opacity = 1;
    setTimeout(() => { copyAlert.style.opacity=0; }, 2000);
  });
});

// Handle back button
document.getElementById('backButton').addEventListener('click', () => {
  window.location.href='index3.html';
});
</script>
</body>
</html>
